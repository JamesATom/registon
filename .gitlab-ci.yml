image: node:18-alpine

stages:
    - install
    - build
    - test

install_dependencies:
    stage: install
    script:
        - export PATH="$PATH:/opt/homebrew/bin"
        - yarn install

build_gateway:
    stage: build
    tags: 
        - nestjs
    script:
        - yarn --cwd apps/gateway build

# test_gateway:
#   stage: test
#   script:
#     - yarn --cwd apps/gateway test
